
@{
    ViewData["Title"] = "Home";
    // Suppose you have a dictionary:
    // ViewBag.TabbedProducts = new Dictionary<string, List<Product>>
    // keyed by CategoryName or something similar.
}

<!-- TAB NAVIGATION -->
<ul class="nav nav-tabs" id="homeTab" role="tablist">
    @foreach (var categoryName in ViewBag.TabbedProducts.Keys)
    {
        var firstCategory = ViewBag.TabbedProducts.Keys.First();
        bool isActive = (categoryName == firstCategory);

        <li class="nav-item" role="presentation">
            <button class="nav-link @(isActive ? "active" : "")"
                    id="@categoryName-Tab"
                    data-bs-toggle="tab"
                    data-bs-target="#@categoryName"
                    type="button"
                    role="tab"
                    aria-controls="@categoryName"
                    aria-selected="@isActive">
                @categoryName
            </button>
        </li>
    }
</ul>

<!-- TAB CONTENT -->
<div class="tab-content" id="homeTabContent">
    @foreach (var categoryName in ViewBag.TabbedProducts.Keys)
    {
        var firstCategory = ViewBag.TabbedProducts.Keys.First();
        bool isActive = (categoryName == firstCategory);

        <div class="tab-pane fade @(isActive ? "show active" : "")"
             id="@categoryName"
             role="tabpanel"
             aria-labelledby="@categoryName-Tab">

            <div class="row mt-3">
                @foreach (var product in ViewBag.TabbedProducts[categoryName])
                {
                    <div class="col-md-3">
                        <div class="card mb-4">
                            <div class="card-img-top-container" style="height: 200px; overflow: hidden;">
                                @if (!string.IsNullOrEmpty(product.ImageUrl))
                                {
                                    <img src="@product.ImageUrl" class="card-img-top"
                                         alt="Imaginea produsului"
                                         style="height: 100%; width: auto; object-fit: cover;" />
                                }
                            </div>
                            <div class="card-body text-center">
                                <h5>@product.Title</h5>
                                <p class="text-muted">Preț: @product.Price.ToString("0.00") Lei</p>

                                <!-- Add to cart directly from home screen -->
                                <form asp-controller="Products" asp-action="AddCart" method="post">
                                    <input type="hidden" name="ProductId" value="@product.Id" />
                                    <input type="number" name="Quantity" value="1" min="1" class="form-control mb-2" style="max-width: 80px; margin: 0 auto;" />
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-basket"></i> Adaugă în coș
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>
